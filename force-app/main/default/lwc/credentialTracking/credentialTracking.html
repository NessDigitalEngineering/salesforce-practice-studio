<template>
    <lightning-card title={title}>
        <template if:true={emptyRecords}>
            <div class="slds-var-p-around_small slds-scrollable_y  setHeight">
                <table class="slds-table" aria-describedby="To display User's Active Credentils">
                    <thead></thead>
                    <tbody>
                        <template for:each={userCredentialsData} for:item="u">
                            <tr class="slds-hint-parent" key={u.Id}>
                                <th></th>
                                <td data-label="Credentials">
                                    <lightning-layout vertical-align="center" horizontal-align="left"
                                        multiple-rows="true">
                                        <lightning-layout-item flexibility="auto, no-grow" padding="around-small"
                                            size="2" large-device-size="2" medium-device-size="2" small-device-size="2">
                                            <div class="imgAdjusted">
                                                <lightning-formatted-rich-text value={u.Badge_Icon__c}
                                                    title={u.credentialName}>
                                                </lightning-formatted-rich-text>
                                            </div>
                                        </lightning-layout-item>
                                        <lightning-layout-item flexibility="auto" padding="around-small" size="4"
                                            large-device-size="4" medium-device-size="4" small-device-size="4">
                                            <p class="text-align">
                                                <lightning-formatted-text value={u.Credential__r.Name}
                                                    title={u.Credential__r.Name}></lightning-formatted-text>
                                            </p>
                                        </lightning-layout-item>
                                        <lightning-layout-item padding="around-small" size="2" large-device-size="2"
                                            medium-device-size="2" small-device-size="2">
                                            <p>
                                                <lightning-formatted-text value={u.Status__c} title={u.Status__c}>
                                                </lightning-formatted-text>
                                            </p>
                                        </lightning-layout-item>
                                        <lightning-layout-item padding="around-small" size="4" large-device-size="4"
                                            medium-device-size="4" small-device-size="4">
                                            <div class="">
                                                <button
                                                    class="slds-button slds-button_brand slds-button_slds-button_full-width"
                                                    label={u.nextStatusLbl} value={u.Id} title={u.nextStatus}
                                                    onclick={handleClick}>{u.nextStatusLbl}</button>
                                            </div>
                                        </lightning-layout-item>

                                    </lightning-layout>
                                </td>
                                <template if:true={isShowModal}>
                                    <section key={u.id} role="dialog" tabindex="-1" aria-labelledby="modal-heading-01"
                                        aria-describedby="modal-content-id-1" aria-modal="true"
                                        class="slds-modal slds-fade-in-open">
                                        <div class="slds-modal__container confirmation_class">
                                            <header class="slds-modal__header">
                                                <button
                                                    class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse"
                                                    title="Close" onclick={hideModalBox}>
                                                    <lightning-icon icon-name="utility:close" alternative-text="close"
                                                        variant="inverse" size="small"></lightning-icon>
                                                    <span class="slds-assistive-text">Close</span>
                                                </button>
                                                <h2 class="slds-text-heading_medium slds-hyphenate">
                                                    Confirmation</h2>
                                            </header>
                                            <div class="slds-modal__content slds-var-p-around_medium">
                                                <div class="slds-align_absolute-center" style="height:3rem">
                                                    Do
                                                    you need a Voucher?</div>
                                            </div>
                                            <footer class="slds-modal__footer">
                                                <lightning-button class="button" variant="neutral" label="Yes"
                                                    onclick={showExamDetailsModal}>
                                                </lightning-button>
                                                <lightning-button variant="brand" label="No"
                                                    onclick={showExamDetailsModal}>
                                                </lightning-button>
                                            </footer>
                                        </div>
                                    </section>
                                    <div class="slds-backdrop slds-backdrop_open"></div>
                                </template>
                                <template if:true={displayExamDetailsModal}>
                                    <section key={u.id} role="dialog" tabindex="-1" aria-labelledby="modal-heading-01"
                                        aria-describedby="modal-content-id-1" aria-modal="true"
                                        class="slds-modal slds-fade-in-open">
                                        <div class="slds-modal__container">
                                            <header class="slds-modal__header">
                                                <button
                                                    class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse"
                                                    title="Close" onclick={closeModal}>
                                                    <lightning-icon icon-name="utility:close" alternative-text="close"
                                                        variant="inverse" size="small">
                                                    </lightning-icon>
                                                    <span class="slds-assistive-text">Close</span>
                                                </button>
                                                <h2 class="slds-text-heading_medium slds-hyphenate">
                                                    Credential Exam
                                                    Attempt Details</h2>
                                            </header>
                                            <div class="slds-modal__content slds-p-around_medium">
                                                <div class="slds-grid slds-wrap">
                                                    <div
                                                        class="slds-col slds-size_6-of-12 slds-p-horizontal--medium slds-m-bottom_medium">
                                                        <lightning-input name="credential" label="Credential Name"
                                                            value={u.Credential__r.Name} disabled>
                                                        </lightning-input>
                                                    </div>
                                                    <div
                                                        class="slds-col slds-size_6-of-12 slds-p-horizontal--medium slds-m-bottom_medium">
                                                        <lightning-input class="slds-datetime-picker" type="date"
                                                            label="When are you planning for your exam?"
                                                            date-style="short" onchange={handleDateChange}>
                                                        </lightning-input>
                                                    </div>
                                                    <div
                                                        class="slds-col slds-size_6-of-12 slds-p-horizontal--medium slds-m-bottom_medium">
                                                        <lightning-textarea
                                                            label="Are you ready for your exam? Please share your comments"
                                                            required value="" onchange={handleCommentChange}>
                                                        </lightning-textarea>
                                                    </div>
                                                </div>
                                            </div>
                                            <footer class="slds-modal__footer">
                                                <lightning-button class="button" variant="neutral" label="Cancel"
                                                    onclick={closeModal}>
                                                </lightning-button>
                                                <lightning-button variant="brand" label="Save"
                                                    onclick={createNewRecord}>
                                                </lightning-button>
                                            </footer>
                                        </div>
                                    </section>
                                </template>
                            </tr>
                        </template>
                    </tbody>
                </table>
            </div>
        </template>
        <template if:true={showIcon}>
            <div class="slds-text-align_center imgAdjustment">
                <img src={Icn} aria-hidden="true" alt="Assignment Logo"></img>
            </div>

            <div class="slds-text-align_center">
                <h2>You don’t have any assignments in this list. Check back later.</h2><br>
            </div>
        </template>
    </lightning-card>
</template>