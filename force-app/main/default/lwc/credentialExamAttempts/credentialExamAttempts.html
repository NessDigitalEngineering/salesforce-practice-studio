<template>
	<lightning-card title={title}>
		<template if:true={emptyRecords}>
			<div class="slds-var-p-around_small slds-scrollable_y  setHeight">
				<table aria-describedby="" class="slds-table">
					<thead></thead>
					<tbody>
						<template for:each={searchRecords} for:item="cred" for:index="index">
							<tr class="slds-hint-parent" key={cred.Id}>
								<th></th>
								<td data-label="Credentials">
									<lightning-layout class="slds-box " vertical-align="center" horizontal-align="left"
										multiple-rows="true">
										<lightning-layout-item size="4" large-device-size="4" medium-device-size="3"
											small-device-size="9">
											<p class="slds-text-title_bold" title={label.ExamAttemptID}>Exam Attempt ID
											</p>
											<p class="slds-truncate" title={label.User_Credential}>User Credential</p>
											<p class="slds-truncate" title={label.Credential_Name}>Credential Name</p>
											<p class="slds-truncate" title={label.Exam_Date_Time}>Exam Date Time</p>
											<p class="slds-truncate" title={label.Status}>Status</p>

										</lightning-layout-item>
										<lightning-layout-item size="5" large-device-size="5" medium-device-size="3"
											small-device-size="9">
											<p class="slds-text-title_bold">{cred.Name} </p>
											<p class="slds-truncate">{cred.User_Credential__r.Name}</p>
											<p class="slds-truncate">{cred.Credential__c}</p>
											<p class="slds-truncate">
												<template if:false={editExamDate}>
													<lightning-formatted-date-time value={cred.Exam_Date_Time__c}
														time-zone={timeZone} year="numeric" month="numeric"
														day="numeric" hour="2-digit" minute="2-digit">
													</lightning-formatted-date-time>&nbsp;
													<lightning-button-icon icon-name="utility:edit"
														input-type="datetime" onclick={handleDateEdit} size="x-small">
													</lightning-button-icon>
												</template>

												<template if:true={editExamDate}>
													<lightning-input type="datetime" name={cred.Id}
														value={cred.Exam_Date_Time__c} onchange={updateExmDate}>
													</lightning-input>
												</template>
											</p>
											<p class="slds-truncate">{cred.Status__c}</p>
										</lightning-layout-item>
										<lightning-layout-item size="3" large-device-size="3" medium-device-size="3"
											small-device-size="9">
											<template if:true={cred.showButton}>
												<div class="slds-p-bottom_xx-large btn_Align">
													<button class="slds-button slds-button_brand  slds-button_stretch"
                                                        label={cred.buttonName} value={cred.Id}
                                                        onclick={handleClick}>{cred.buttonName}
                                                    </button>
												</div>
											</template>
										</lightning-layout-item>
									</lightning-layout>
								</td>
							</tr>
						</template>
					</tbody>
				</table>

			</div>

		</template>

		<template if:true={showIcon}>
			<div class="slds-text-align_center imgAdjustment">
				<img src={Icn} aria-hidden="true" alt="Assignment Logo"></img>
			</div>
			<div class="slds-text-align_center">
				<h2>{label.ExamAttempt_EmptyMsg}</h2><br>
    </div>
		</template>
		<template if:true={isShowExamModal}>
			<section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true"
				aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open">
				<div class="slds-modal__container">
					<!-- modal header start -->
					<header class="slds-modal__header">
						<button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick={hideModalBox}>
                <lightning-icon icon-name="utility:close"
                   alternative-text="close"
                   variant="inverse"
                   size="small" ></lightning-icon>
                <span class="slds-assistive-text">Close</span>
             </button>
						<h2 id="modal-heading-01" class="slds-text-heading_medium slds-hyphenate"> Exam Schedule </h2>
					</header>

					<!-- modal body start -->
					<div class="slds-modal__content slds-p-around_medium" id="modal-content-id-1">
						<lightning-layout multiple-rows="true">
							<lightning-layout-item size="12" padding="around-small" small-device-size="9"
								medium-device-size="6" large-device-size="6">
								<label class ="credlabel"> Credential Exam Attempt ID </label>
								<lightning-input name="credential" value={examname} class = "creds"
									 disabled>
								</lightning-input>
							</lightning-layout-item>
							<lightning-layout-item size="12" padding="around-small" small-device-size="9"
								medium-device-size="6" large-device-size="6">
								<h6 class="headerText">
									<span  class = "abbr">*</span> Exam DateTime </h6>
								<lightning-input variant="label-hidden" class="validate" type="datetime" required
									 date-style="short" onchange={handleDateChange}>
								</lightning-input>
							</lightning-layout-item>
							<lightning-layout-item size="12" padding="around-small" small-device-size="9"
								medium-device-size="6" large-device-size="6">
								<label class ="nameLabel" > Credential Name </label>
								<lightning-input class="validates" value={credentialName} disabled>
								</lightning-input>
							</lightning-layout-item>
							<lightning-layout-item size="12" padding="around-small" small-device-size="9"
								medium-device-size="6" large-device-size="6">
								<h6 class="headerText1"> Reciept
									<lightning-helptext class ="i-button"
										content='Please upload your exam reciept'>
									</lightning-helptext>
								</h6>
								<lightning-input type="file" multiple class = "fup"
									accept=".docx, .pdf, .jpg, .txt, .png, .csv, .html, .zip"
									onchange={handleFileUploaded}>
								</lightning-input>

								<div class="slds-m-around_small pill">
									<template if:true={filesDatas}>
										<template for:each={filesDatas} for:item="file" for:index="index">
											<lightning-pill key={file.fileName} label={file.fileName} data-id={index}
												onclick={removeReceiptImage}></lightning-pill>
										</template>
									</template>

								</div>
							</lightning-layout-item> 
						</lightning-layout>
					</div>
					<!-- modal footer start-->
					<footer class="slds-modal__footer">
						<lightning-button class="button" variant="neutral"
							label="Cancel" onclick={hideModalBox}>
						</lightning-button>
						<lightning-button variant="brand" label="Save" onclick={saveRecord}>
						</lightning-button>
					</footer>
				</div>
			</section>
			<div class="slds-backdrop slds-backdrop_open"></div>
		</template>
	</lightning-card>
</template>